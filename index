import React, { useState, useEffect, useCallback, useRef } from 'react';
import { ShoppingBasket, DollarSign, XCircle, CheckCircle, RefreshCcw, TrendingUp, User, ShoppingCart, AlertCircle, Trophy } from 'lucide-react';

// --- éŠæˆ²è³‡æ–™åº« (Item Database - 500 Items) ---
const MARKET_ITEMS = [
  // --- åŸå§‹ 1-100 ---
  { id: 1, icon: "ğŸ", en: "Apple", ch: "è˜‹æœ", price: 2, category: "Fruit" },
  { id: 2, icon: "ğŸŒ", en: "Banana", ch: "é¦™è•‰", price: 2, category: "Fruit" },
  { id: 3, icon: "ğŸ‡", en: "Grape", ch: "è‘¡è„", price: 4, category: "Fruit" },
  { id: 4, icon: "ğŸ¥•", en: "Carrot", ch: "èƒ¡è˜¿è””", price: 1, category: "Veg" },
  { id: 5, icon: "ğŸ¥¦", en: "Broccoli", ch: "èŠ±æ¤°èœ", price: 3, category: "Veg" },
  { id: 6, icon: "ğŸ¥©", en: "Steak", ch: "ç‰›æ’", price: 15, category: "Meat" },
  { id: 7, icon: "ğŸ—", en: "Chicken", ch: "é›è‚‰", price: 8, category: "Meat" },
  { id: 8, icon: "ğŸ¥š", en: "Egg", ch: "é›è›‹", price: 5, category: "Dairy" },
  { id: 9, icon: "ğŸ¥›", en: "Milk", ch: "ç‰›å¥¶", price: 4, category: "Dairy" },
  { id: 10, icon: "ğŸ§€", en: "Cheese", ch: "èµ·å¸", price: 6, category: "Dairy" },
  { id: 11, icon: "ğŸ", en: "Bread", ch: "éºµåŒ…", price: 3, category: "Bakery" },
  { id: 12, icon: "ğŸ¥", en: "Croissant", ch: "å¯é Œ", price: 4, category: "Bakery" },
  { id: 13, icon: "ğŸª", en: "Cookie", ch: "é¤…ä¹¾", price: 2, category: "Snack" },
  { id: 14, icon: "ğŸ«", en: "Chocolate", ch: "å·§å…‹åŠ›", price: 3, category: "Snack" },
  { id: 15, icon: "ğŸ§ƒ", en: "Juice", ch: "æœæ±", price: 3, category: "Drink" },
  { id: 16, icon: "ğŸº", en: "Beer", ch: "å•¤é…’", price: 5, category: "Drink" },
  { id: 17, icon: "ğŸ§´", en: "Shampoo", ch: "æ´—é«®ç²¾", price: 12, category: "Daily" },
  { id: 18, icon: "ğŸ§»", en: "Tissue", ch: "è¡›ç”Ÿç´™", price: 8, category: "Daily" },
  { id: 19, icon: "ğŸ§¼", en: "Soap", ch: "è‚¥çš‚", price: 2, category: "Daily" },
  { id: 20, icon: "ğŸŸ", en: "Fish", ch: "é­š", price: 10, category: "Meat" },
  { id: 21, icon: "ğŸ•", en: "Pizza", ch: "æŠ«è–©", price: 12, category: "Bakery" },
  { id: 22, icon: "ğŸ”", en: "Burger", ch: "æ¼¢å ¡", price: 8, category: "Bakery" },
  { id: 23, icon: "ğŸŸ", en: "Fries", ch: "è–¯æ¢", price: 4, category: "Snack" },
  { id: 24, icon: "ğŸ¥¤", en: "Soda", ch: "æ±½æ°´", price: 2, category: "Drink" },
  { id: 25, icon: "ğŸ‰", en: "Watermelon", ch: "è¥¿ç“œ", price: 6, category: "Fruit" },
  { id: 26, icon: "ğŸ‹", en: "Lemon", ch: "æª¸æª¬", price: 2, category: "Fruit" },
  { id: 27, icon: "ğŸ…", en: "Tomato", ch: "ç•ªèŒ„", price: 2, category: "Veg" },
  { id: 28, icon: "ğŸ¥”", en: "Potato", ch: "é¦¬éˆ´è–¯", price: 2, category: "Veg" },
  { id: 29, icon: "ğŸ¦", en: "Ice Cream", ch: "å†°æ·‡æ·‹", price: 5, category: "Dairy" },
  { id: 30, icon: "ğŸ°", en: "Cake", ch: "è›‹ç³•", price: 6, category: "Bakery" },
  { id: 31, icon: "ğŸ“", en: "Strawberry", ch: "è‰è“", price: 5, category: "Fruit" },
  { id: 32, icon: "ğŸ’", en: "Cherry", ch: "æ«»æ¡ƒ", price: 8, category: "Fruit" },
  { id: 33, icon: "ğŸ‘", en: "Peach", ch: "æ¡ƒå­", price: 4, category: "Fruit" },
  { id: 34, icon: "ğŸ", en: "Pear", ch: "æ¢¨å­", price: 3, category: "Fruit" },
  { id: 35, icon: "ğŸ", en: "Pineapple", ch: "é³³æ¢¨", price: 5, category: "Fruit" },
  { id: 36, icon: "ğŸ¥­", en: "Mango", ch: "èŠ’æœ", price: 6, category: "Fruit" },
  { id: 37, icon: "ğŸ¥¥", en: "Coconut", ch: "æ¤°å­", price: 4, category: "Fruit" },
  { id: 38, icon: "ğŸ¥", en: "Kiwi", ch: "å¥‡ç•°æœ", price: 3, category: "Fruit" },
  { id: 39, icon: "ğŸ¥‘", en: "Avocado", ch: "é…ªæ¢¨", price: 5, category: "Fruit" },
  { id: 40, icon: "ğŸˆ", en: "Melon", ch: "å“ˆå¯†ç“œ", price: 7, category: "Fruit" },
  { id: 41, icon: "ğŸŒ½", en: "Corn", ch: "ç‰ç±³", price: 2, category: "Veg" },
  { id: 42, icon: "ğŸŒ¶ï¸", en: "Chili", ch: "è¾£æ¤’", price: 1, category: "Veg" },
  { id: 43, icon: "ğŸ¥’", en: "Cucumber", ch: "å°é»ƒç“œ", price: 2, category: "Veg" },
  { id: 44, icon: "ğŸ„", en: "Mushroom", ch: "è˜‘è‡", price: 3, category: "Veg" },
  { id: 45, icon: "ğŸ§…", en: "Onion", ch: "æ´‹è”¥", price: 1, category: "Veg" },
  { id: 46, icon: "ğŸ§„", en: "Garlic", ch: "å¤§è’œ", price: 1, category: "Veg" },
  { id: 47, icon: "ğŸ†", en: "Eggplant", ch: "èŒ„å­", price: 2, category: "Veg" },
  { id: 48, icon: "ğŸ¥¬", en: "Lettuce", ch: "ç”Ÿèœ", price: 2, category: "Veg" },
  { id: 49, icon: "ğŸ ", en: "Sweet Potato", ch: "åœ°ç“œ", price: 2, category: "Veg" },
  { id: 50, icon: "ğŸƒ", en: "Pumpkin", ch: "å—ç“œ", price: 4, category: "Veg" },
  { id: 51, icon: "ğŸ¦", en: "Shrimp", ch: "è¦å­", price: 12, category: "Seafood" },
  { id: 52, icon: "ğŸ¦", en: "Lobster", ch: "é¾è¦", price: 25, category: "Seafood" },
  { id: 53, icon: "ğŸ¦€", en: "Crab", ch: "èƒèŸ¹", price: 18, category: "Seafood" },
  { id: 54, icon: "ğŸ¦‘", en: "Squid", ch: "é­·é­š", price: 8, category: "Seafood" },
  { id: 55, icon: "ğŸ¥“", en: "Bacon", ch: "åŸ¹æ ¹", price: 6, category: "Meat" },
  { id: 56, icon: "ğŸŒ­", en: "Hot Dog", ch: "ç†±ç‹—", price: 4, category: "Meat" },
  { id: 57, icon: "ğŸ–", en: "Ham", ch: "ç«è…¿", price: 7, category: "Meat" },
  { id: 58, icon: "ğŸ©", en: "Donut", ch: "ç”œç”œåœˆ", price: 3, category: "Bakery" },
  { id: 59, icon: "ğŸ¥¯", en: "Bagel", ch: "è²æœ", price: 3, category: "Bakery" },
  { id: 60, icon: "ğŸ¥", en: "Pancake", ch: "é¬†é¤…", price: 5, category: "Bakery" },
  { id: 61, icon: "ğŸ§‡", en: "Waffle", ch: "æ ¼å­é¬†é¤…", price: 5, category: "Bakery" },
  { id: 62, icon: "ğŸ¥ª", en: "Sandwich", ch: "ä¸‰æ˜æ²»", price: 4, category: "Bakery" },
  { id: 63, icon: "ğŸŒ®", en: "Taco", ch: "å¡”å¯é¤…", price: 5, category: "Bakery" },
  { id: 64, icon: "ğŸŒ¯", en: "Burrito", ch: "æ²é¤…", price: 6, category: "Bakery" },
  { id: 65, icon: "ğŸ¥§", en: "Pie", ch: "æ´¾", price: 5, category: "Bakery" },
  { id: 66, icon: "ğŸ¿", en: "Popcorn", ch: "çˆ†ç±³èŠ±", price: 4, category: "Snack" },
  { id: 67, icon: "ğŸ¬", en: "Candy", ch: "ç³–æœ", price: 1, category: "Snack" },
  { id: 68, icon: "ğŸ­", en: "Lollipop", ch: "æ£’æ£’ç³–", price: 1, category: "Snack" },
  { id: 69, icon: "ğŸ®", en: "Pudding", ch: "å¸ƒä¸", price: 2, category: "Snack" },
  { id: 70, icon: "ğŸ¯", en: "Honey", ch: "èœ‚èœœ", price: 8, category: "Snack" },
  { id: 71, icon: "ğŸ¥œ", en: "Peanut", ch: "èŠ±ç”Ÿ", price: 3, category: "Snack" },
  { id: 72, icon: "â˜•", en: "Coffee", ch: "å’–å•¡", price: 4, category: "Drink" },
  { id: 73, icon: "ğŸµ", en: "Tea", ch: "èŒ¶", price: 3, category: "Drink" },
  { id: 74, icon: "ğŸ·", en: "Wine", ch: "è‘¡è„é…’", price: 15, category: "Drink" },
  { id: 75, icon: "ğŸ¸", en: "Cocktail", ch: "é›å°¾é…’", price: 10, category: "Drink" },
  { id: 76, icon: "ğŸ§‹", en: "Bubble Tea", ch: "çç å¥¶èŒ¶", price: 5, category: "Drink" },
  { id: 77, icon: "ğŸª¥", en: "Toothbrush", ch: "ç‰™åˆ·", price: 3, category: "Daily" },
  { id: 78, icon: "ğŸ¦·", en: "Toothpaste", ch: "ç‰™è†", price: 4, category: "Daily" },
  { id: 79, icon: "ğŸ§´", en: "Lotion", ch: "ä¹³æ¶²", price: 10, category: "Daily" },
  { id: 80, icon: "ğŸ§º", en: "Basket", ch: "ç±ƒå­", price: 6, category: "Daily" },
  { id: 81, icon: "ğŸ§½", en: "Sponge", ch: "æµ·ç¶¿", price: 1, category: "Daily" },
  { id: 82, icon: "ğŸ§¹", en: "Broom", ch: "æƒæŠŠ", price: 7, category: "Daily" },
  { id: 83, icon: "ğŸª£", en: "Bucket", ch: "æ°´æ¡¶", price: 5, category: "Daily" },
  { id: 84, icon: "ğŸ’¡", en: "Light Bulb", ch: "ç‡ˆæ³¡", price: 3, category: "Daily" },
  { id: 85, icon: "ğŸ”‹", en: "Battery", ch: "é›»æ± ", price: 6, category: "Daily" },
  { id: 86, icon: "â˜‚ï¸", en: "Umbrella", ch: "é›¨å‚˜", price: 8, category: "Daily" },
  { id: 87, icon: "ğŸ‘•", en: "T-Shirt", ch: "Tæ¤", price: 15, category: "Clothing" },
  { id: 88, icon: "ğŸ‘–", en: "Jeans", ch: "ç‰›ä»”è¤²", price: 25, category: "Clothing" },
  { id: 89, icon: "ğŸ‘—", en: "Dress", ch: "æ´‹è£", price: 30, category: "Clothing" },
  { id: 90, icon: "ğŸ§¦", en: "Socks", ch: "è¥ªå­", price: 3, category: "Clothing" },
  { id: 91, icon: "ğŸ‘Ÿ", en: "Shoes", ch: "é‹å­", price: 40, category: "Clothing" },
  { id: 92, icon: "ğŸ§¢", en: "Cap", ch: "å¸½å­", price: 12, category: "Clothing" },
  { id: 93, icon: "ğŸ‘“", en: "Glasses", ch: "çœ¼é¡", price: 50, category: "Clothing" },
  { id: 94, icon: "âœï¸", en: "Pencil", ch: "é‰›ç­†", price: 1, category: "Stationery" },
  { id: 95, icon: "ğŸ–Šï¸", en: "Pen", ch: "åŸå­ç­†", price: 2, category: "Stationery" },
  { id: 96, icon: "ğŸ“’", en: "Notebook", ch: "ç­†è¨˜æœ¬", price: 4, category: "Stationery" },
  { id: 97, icon: "âœ‚ï¸", en: "Scissors", ch: "å‰ªåˆ€", price: 5, category: "Stationery" },
  { id: 98, icon: "ğŸ§¸", en: "Teddy Bear", ch: "æ³°è¿ªç†Š", price: 20, category: "Toys" },
  { id: 99, icon: "ğŸš—", en: "Toy Car", ch: "ç©å…·è»Š", price: 8, category: "Toys" },
  { id: 100, icon: "ğŸ¤–", en: "Robot", ch: "æ©Ÿå™¨äºº", price: 25, category: "Toys" },

  // --- æ–°å¢è‡³ 500 å€‹ (101-500) ---
  // å®¶å±…èˆ‡å»šæˆ¿ (Home & Kitchen)
  { id: 101, icon: "ğŸ³", en: "Frying Pan", ch: "å¹³åº•é‹", price: 20, category: "Kitchen" },
  { id: 102, icon: "ğŸ¥£", en: "Bowl", ch: "ç¢—", price: 5, category: "Kitchen" },
  { id: 103, icon: "ğŸ½ï¸", en: "Plate", ch: "ç›¤å­", price: 6, category: "Kitchen" },
  { id: 104, icon: "ğŸ¥„", en: "Spoon", ch: "æ¹¯åŒ™", price: 2, category: "Kitchen" },
  { id: 105, icon: "ğŸ´", en: "Fork", ch: "å‰å­", price: 2, category: "Kitchen" },
  { id: 106, icon: "ğŸ”ª", en: "Knife", ch: "åˆ€å­", price: 8, category: "Kitchen" },
  { id: 107, icon: "ğŸ¥¢", en: "Chopsticks", ch: "ç­·å­", price: 2, category: "Kitchen" },
  { id: 108, icon: "ğŸ¥¤", en: "Cup", ch: "æ¯å­", price: 4, category: "Kitchen" },
  { id: 109, icon: "ğŸº", en: "Vase", ch: "èŠ±ç“¶", price: 15, category: "Home" },
  { id: 110, icon: "ğŸ–¼ï¸", en: "Frame", ch: "ç›¸æ¡†", price: 10, category: "Home" },
  { id: 111, icon: "ğŸª", en: "Mirror", ch: "é¡å­", price: 25, category: "Home" },
  { id: 112, icon: "ğŸ•¯ï¸", en: "Candle", ch: "è Ÿç‡­", price: 5, category: "Home" },
  { id: 113, icon: "ğŸ•°ï¸", en: "Clock", ch: "æ™‚é˜", price: 18, category: "Home" },
  { id: 114, icon: "ğŸ›Œ", en: "Bed", ch: "åºŠ", price: 200, category: "Home" },
  { id: 115, icon: "ğŸ›‹ï¸", en: "Sofa", ch: "æ²™ç™¼", price: 150, category: "Home" },
  { id: 116, icon: "ğŸª‘", en: "Chair", ch: "æ¤…å­", price: 40, category: "Home" },
  { id: 117, icon: "ğŸšª", en: "Door", ch: "é–€", price: 80, category: "Home" },
  { id: 118, icon: "ğŸ›", en: "Bathtub", ch: "æµ´ç¼¸", price: 120, category: "Home" },
  { id: 119, icon: "ğŸš½", en: "Toilet", ch: "é¦¬æ¡¶", price: 90, category: "Home" },
  { id: 120, icon: "ğŸš¿", en: "Shower", ch: "æ·‹æµ´", price: 50, category: "Home" },
  
  // é›»å­ç”¢å“ (Electronics)
  { id: 121, icon: "ğŸ“±", en: "Smartphone", ch: "æ™ºæ…§å‹æ‰‹æ©Ÿ", price: 500, category: "Electronics" },
  { id: 122, icon: "ğŸ’»", en: "Laptop", ch: "ç­†è¨˜å‹é›»è…¦", price: 800, category: "Electronics" },
  { id: 123, icon: "ğŸ–¥ï¸", en: "Monitor", ch: "è¢å¹•", price: 200, category: "Electronics" },
  { id: 124, icon: "âŒ¨ï¸", en: "Keyboard", ch: "éµç›¤", price: 50, category: "Electronics" },
  { id: 125, icon: "ğŸ–±ï¸", en: "Mouse", ch: "æ»‘é¼ ", price: 25, category: "Electronics" },
  { id: 126, icon: "ğŸ§", en: "Headphones", ch: "è€³æ©Ÿ", price: 60, category: "Electronics" },
  { id: 127, icon: "ğŸ“·", en: "Camera", ch: "ç›¸æ©Ÿ", price: 300, category: "Electronics" },
  { id: 128, icon: "ğŸ“º", en: "Television", ch: "é›»è¦–", price: 400, category: "Electronics" },
  { id: 129, icon: "âŒš", en: "Watch", ch: "æ‰‹éŒ¶", price: 150, category: "Electronics" },
  { id: 130, icon: "ğŸ–¨ï¸", en: "Printer", ch: "å°è¡¨æ©Ÿ", price: 120, category: "Electronics" },
  { id: 131, icon: "ğŸ®", en: "Controller", ch: "éŠæˆ²æ‰‹æŠŠ", price: 60, category: "Electronics" },
  { id: 132, icon: "ğŸ•¹ï¸", en: "Joystick", ch: "æ–æ¡¿", price: 40, category: "Electronics" },
  { id: 133, icon: "ğŸ”Œ", en: "Plug", ch: "æ’é ­", price: 5, category: "Electronics" },
  { id: 134, icon: "ğŸ”‹", en: "Battery Pack", ch: "è¡Œå‹•é›»æº", price: 20, category: "Electronics" },
  { id: 135, icon: "ğŸ’¾", en: "Floppy Disk", ch: "ç£ç‰‡", price: 2, category: "Electronics" },
  
  // äº¤é€šå·¥å…·èˆ‡æˆ¶å¤– (Transport & Outdoor)
  { id: 136, icon: "ğŸš²", en: "Bicycle", ch: "è…³è¸è»Š", price: 100, category: "Transport" },
  { id: 137, icon: "ğŸ›¹", en: "Skateboard", ch: "æ»‘æ¿", price: 40, category: "Transport" },
  { id: 138, icon: "ğŸ›´", en: "Scooter", ch: "æ»‘æ¿è»Š", price: 50, category: "Transport" },
  { id: 139, icon: "â›º", en: "Tent", ch: "å¸³ç¯·", price: 80, category: "Outdoor" },
  { id: 140, icon: "ğŸ’", en: "Backpack", ch: "èƒŒåŒ…", price: 30, category: "Outdoor" },
  { id: 141, icon: "ğŸ§­", en: "Compass", ch: "æŒ‡å—é‡", price: 15, category: "Outdoor" },
  { id: 142, icon: "ğŸ—ºï¸", en: "Map", ch: "åœ°åœ–", price: 5, category: "Outdoor" },
  { id: 143, icon: "ğŸ”¦", en: "Flashlight", ch: "æ‰‹é›»ç­’", price: 10, category: "Outdoor" },
  { id: 144, icon: "ğŸ”¥", en: "Fire Extinguisher", ch: "æ»…ç«å™¨", price: 35, category: "Safety" },
  { id: 145, icon: "ğŸ§³", en: "Suitcase", ch: "è¡Œæç®±", price: 60, category: "Travel" },
  
  // éŸ³æ¨‚èˆ‡è—è¡“ (Music & Art)
  { id: 146, icon: "ğŸ¸", en: "Guitar", ch: "å‰ä»–", price: 120, category: "Music" },
  { id: 147, icon: "ğŸ¹", en: "Piano", ch: "é‹¼ç´", price: 500, category: "Music" },
  { id: 148, icon: "ğŸ»", en: "Violin", ch: "å°æç´", price: 200, category: "Music" },
  { id: 149, icon: "ğŸ¥", en: "Drum", ch: "é¼“", price: 80, category: "Music" },
  { id: 150, icon: "ğŸº", en: "Trumpet", ch: "å°è™Ÿ", price: 100, category: "Music" },
  { id: 151, icon: "ğŸ·", en: "Saxophone", ch: "è–©å…‹æ–¯é¢¨", price: 150, category: "Music" },
  { id: 152, icon: "ğŸ¨", en: "Palette", ch: "èª¿è‰²ç›¤", price: 8, category: "Art" },
  { id: 153, icon: "ğŸ–Œï¸", en: "Brush", ch: "ç•«ç­†", price: 5, category: "Art" },
  { id: 154, icon: "ğŸ–ï¸", en: "Crayon", ch: "è Ÿç­†", price: 3, category: "Art" },
  { id: 155, icon: "ğŸ­", en: "Mask", ch: "é¢å…·", price: 12, category: "Art" },

  // æ›´å¤šé£Ÿç‰© - è”¬èœ (More Veg)
  { id: 156, icon: "ğŸ¥¬", en: "Cabbage", ch: "é«˜éº—èœ", price: 3, category: "Veg" },
  { id: 157, icon: "ğŸ¥¦", en: "Cauliflower", ch: "èŠ±èœ", price: 3, category: "Veg" },
  { id: 158, icon: "ğŸ«‘", en: "Bell Pepper", ch: "ç”œæ¤’", price: 2, category: "Veg" },
  { id: 159, icon: "ğŸ¥‘", en: "Avocado", ch: "é…ªæ¢¨", price: 4, category: "Veg" },
  { id: 160, icon: "ğŸ¥”", en: "Potato", ch: "é¦¬éˆ´è–¯", price: 2, category: "Veg" },
  { id: 161, icon: "ğŸ¥•", en: "Radish", ch: "ç™½è˜¿è””", price: 2, category: "Veg" },
  { id: 162, icon: "ğŸ«’", en: "Olive", ch: "æ©„æ¬–", price: 5, category: "Veg" },
  { id: 163, icon: "ğŸŒ¿", en: "Herb", ch: "é¦™è‰", price: 3, category: "Veg" },
  { id: 164, icon: "ğŸ‹", en: "Bamboo Shoot", ch: "ç«¹ç­", price: 4, category: "Veg" },
  { id: 165, icon: "ğŸ¥œ", en: "Peanut", ch: "èŠ±ç”Ÿ", price: 3, category: "Veg" },

  // æ›´å¤šé£Ÿç‰© - æ°´æœ (More Fruit)
  { id: 166, icon: "ğŸ«", en: "Blueberry", ch: "è—è“", price: 6, category: "Fruit" },
  { id: 167, icon: "ğŸ‹", en: "Lime", ch: "èŠå§†", price: 3, category: "Fruit" },
  { id: 168, icon: "ğŸŠ", en: "Orange", ch: "æŸ³æ©™", price: 3, category: "Fruit" },
  { id: 169, icon: "ğŸŠ", en: "Tangerine", ch: "æ©˜å­", price: 3, category: "Fruit" },
  { id: 170, icon: "ğŸˆ", en: "Cantaloupe", ch: "å“ˆå¯†ç“œ", price: 5, category: "Fruit" },
  { id: 171, icon: "ğŸ", en: "Pear", ch: "æ¢¨å­", price: 3, category: "Fruit" },
  { id: 172, icon: "ğŸ‘", en: "Nectarine", ch: "æ²¹æ¡ƒ", price: 4, category: "Fruit" },
  { id: 173, icon: "ğŸ‡", en: "Raisin", ch: "è‘¡è„ä¹¾", price: 4, category: "Fruit" },
  { id: 174, icon: "ğŸŒ°", en: "Chestnut", ch: "æ —å­", price: 5, category: "Fruit" },
  { id: 175, icon: "ğŸ¥­", en: "Durian", ch: "æ¦´æ§¤", price: 20, category: "Fruit" },

  // æ›´å¤šé£Ÿç‰© - ç†Ÿé£Ÿèˆ‡èª¿æ–™ (Cooked & Spices)
  { id: 176, icon: "ğŸœ", en: "Noodles", ch: "éºµæ¢", price: 8, category: "Food" },
  { id: 177, icon: "ğŸ", en: "Spaghetti", ch: "ç¾©å¤§åˆ©éºµ", price: 10, category: "Food" },
  { id: 178, icon: "ğŸ²", en: "Stew", ch: "ç‡‰èœ", price: 12, category: "Food" },
  { id: 179, icon: "ğŸ›", en: "Curry", ch: "å’–å“©", price: 9, category: "Food" },
  { id: 180, icon: "ğŸ£", en: "Sushi", ch: "å£½å¸", price: 15, category: "Food" },
  { id: 181, icon: "ğŸ±", en: "Bento", ch: "ä¾¿ç•¶", price: 10, category: "Food" },
  { id: 182, icon: "ğŸ¥Ÿ", en: "Dumpling", ch: "æ°´é¤ƒ", price: 6, category: "Food" },
  { id: 183, icon: "ğŸ¤", en: "Tempura", ch: "å¤©å©¦ç¾…", price: 8, category: "Food" },
  { id: 184, icon: "ğŸš", en: "Rice", ch: "ç±³é£¯", price: 2, category: "Food" },
  { id: 185, icon: "ğŸ™", en: "Onigiri", ch: "é£¯ç³°", price: 3, category: "Food" },
  { id: 186, icon: "ğŸ˜", en: "Cracker", ch: "ä»™è²", price: 2, category: "Snack" },
  { id: 187, icon: "ğŸ§‚", en: "Salt", ch: "é¹½", price: 1, category: "Spice" },
  { id: 188, icon: "ğŸ§‚", en: "Pepper", ch: "èƒ¡æ¤’", price: 2, category: "Spice" },
  { id: 189, icon: "ğŸŒ¶ï¸", en: "Chili Sauce", ch: "è¾£æ¤’é†¬", price: 3, category: "Spice" },
  { id: 190, icon: "ğŸ¯", en: "Jam", ch: "æœé†¬", price: 4, category: "Spice" },

  // é‹å‹•ç”¨å“ (Sports)
  { id: 191, icon: "âš½", en: "Soccer Ball", ch: "è¶³çƒ", price: 15, category: "Sports" },
  { id: 192, icon: "ğŸ€", en: "Basketball", ch: "ç±ƒçƒ", price: 18, category: "Sports" },
  { id: 193, icon: "ğŸˆ", en: "Football", ch: "æ©„æ¬–çƒ", price: 20, category: "Sports" },
  { id: 194, icon: "âš¾", en: "Baseball", ch: "æ£’çƒ", price: 5, category: "Sports" },
  { id: 195, icon: "ğŸ¥", en: "Softball", ch: "å£˜çƒ", price: 5, category: "Sports" },
  { id: 196, icon: "ğŸ¾", en: "Tennis Ball", ch: "ç¶²çƒ", price: 3, category: "Sports" },
  { id: 197, icon: "ğŸ", en: "Volleyball", ch: "æ’çƒ", price: 12, category: "Sports" },
  { id: 198, icon: "ğŸ‰", en: "Rugby Ball", ch: "æ©„æ¬–çƒ", price: 18, category: "Sports" },
  { id: 199, icon: "ğŸ±", en: "8-Ball", ch: "æ’çƒ", price: 4, category: "Sports" },
  { id: 200, icon: "ğŸ“", en: "Ping Pong", ch: "ä¹’ä¹“çƒ", price: 1, category: "Sports" },
  { id: 201, icon: "ğŸ¸", en: "Badminton", ch: "ç¾½æ¯›çƒ", price: 2, category: "Sports" },
  { id: 202, icon: "ğŸ¥…", en: "Goal Net", ch: "çƒé–€", price: 50, category: "Sports" },
  { id: 203, icon: "ğŸ¥Š", en: "Boxing Glove", ch: "æ‹³æ“Šæ‰‹å¥—", price: 30, category: "Sports" },
  { id: 204, icon: "ğŸ¥‹", en: "Uniform", ch: "é“æœ", price: 40, category: "Sports" },
  { id: 205, icon: "ğŸ¥‡", en: "Gold Medal", ch: "é‡‘ç‰Œ", price: 100, category: "Sports" },

  // å·¥å…·èˆ‡äº”é‡‘ (Tools)
  { id: 206, icon: "ğŸ”¨", en: "Hammer", ch: "éµéš", price: 10, category: "Tools" },
  { id: 207, icon: "ğŸª“", en: "Axe", ch: "æ–§é ­", price: 15, category: "Tools" },
  { id: 208, icon: "â›ï¸", en: "Pickaxe", ch: "åå­—é¬", price: 18, category: "Tools" },
  { id: 209, icon: "ğŸ”§", en: "Wrench", ch: "æ‰³æ‰‹", price: 8, category: "Tools" },
  { id: 210, icon: "ğŸª›", en: "Screwdriver", ch: "èºçµ²èµ·å­", price: 6, category: "Tools" },
  { id: 211, icon: "ğŸ”©", en: "Nut & Bolt", ch: "èºçµ²èºæ¯", price: 1, category: "Tools" },
  { id: 212, icon: "âš™ï¸", en: "Gear", ch: "é½’è¼ª", price: 5, category: "Tools" },
  { id: 213, icon: "ğŸ—œï¸", en: "Clamp", ch: "å¤¾å…·", price: 12, category: "Tools" },
  { id: 214, icon: "âš–ï¸", en: "Scale", ch: "å¤©å¹³", price: 20, category: "Tools" },
  { id: 215, icon: "ğŸ”—", en: "Chain", ch: "éµéŠ", price: 10, category: "Tools" },
  { id: 216, icon: "ğŸ§²", en: "Magnet", ch: "ç£éµ", price: 4, category: "Tools" },
  { id: 217, icon: "ğŸªœ", en: "Ladder", ch: "æ¢¯å­", price: 30, category: "Tools" },
  { id: 218, icon: "ğŸ§°", en: "Toolbox", ch: "å·¥å…·ç®±", price: 25, category: "Tools" },
  { id: 219, icon: "ğŸ©¹", en: "Bandage", ch: "ç¹ƒå¸¶", price: 2, category: "Health" },
  { id: 220, icon: "ğŸ©º", en: "Stethoscope", ch: "è½è¨ºå™¨", price: 40, category: "Health" },

  // ç§‘å­¸èˆ‡å…¶ä»– (Science & Misc)
  { id: 221, icon: "ğŸ”­", en: "Telescope", ch: "æœ›é é¡", price: 60, category: "Science" },
  { id: 222, icon: "ğŸ”¬", en: "Microscope", ch: "é¡¯å¾®é¡", price: 80, category: "Science" },
  { id: 223, icon: "ğŸ“¡", en: "Satellite", ch: "è¡›æ˜Ÿå¤©ç·š", price: 100, category: "Science" },
  { id: 224, icon: "ğŸ§¬", en: "DNA", ch: "DNAæ¨¡å‹", price: 20, category: "Science" },
  { id: 225, icon: "ğŸ§¯", en: "Extinguisher", ch: "æ»…ç«å™¨", price: 30, category: "Safety" },
  { id: 226, icon: "ğŸ›’", en: "Cart", ch: "è³¼ç‰©è»Š", price: 50, category: "Misc" },
  { id: 227, icon: "ğŸ§", en: "ATM", ch: "ææ¬¾æ©Ÿ", price: 1000, category: "Misc" },
  { id: 228, icon: "ğŸ—‘ï¸", en: "Trash Can", ch: "åƒåœ¾æ¡¶", price: 10, category: "Misc" },
  { id: 229, icon: "ğŸª§", en: "Sign", ch: "å‘Šç¤ºç‰Œ", price: 5, category: "Misc" },
  { id: 230, icon: "ğŸ”‘", en: "Key", ch: "é‘°åŒ™", price: 2, category: "Misc" },
  { id: 231, icon: "ğŸ”", en: "Lock", ch: "é–", price: 8, category: "Misc" },
  { id: 232, icon: "ğŸ“¦", en: "Box", ch: "ç®±å­", price: 3, category: "Misc" },
  { id: 233, icon: "âœ‰ï¸", en: "Envelope", ch: "ä¿¡å°", price: 1, category: "Misc" },
  { id: 234, icon: "ğŸ“®", en: "Postbox", ch: "éƒµç­’", price: 40, category: "Misc" },
  { id: 235, icon: "âœï¸", en: "Pencil Case", ch: "é‰›ç­†ç›’", price: 5, category: "Stationery" },

  // æ›´å¤šå‹•ç‰©èˆ‡å¯µç‰©ç”¨å“ (Pets & Animals)
  { id: 236, icon: "ğŸ•", en: "Dog", ch: "ç‹—", price: 50, category: "Pet" },
  { id: 237, icon: "ğŸˆ", en: "Cat", ch: "è²“", price: 50, category: "Pet" },
  { id: 238, icon: "ğŸ¹", en: "Hamster", ch: "å€‰é¼ ", price: 15, category: "Pet" },
  { id: 239, icon: "ğŸ°", en: "Rabbit", ch: "å…”å­", price: 20, category: "Pet" },
  { id: 240, icon: "ğŸ¦œ", en: "Parrot", ch: "é¸šéµ¡", price: 30, category: "Pet" },
  { id: 241, icon: "ğŸ¦´", en: "Bone", ch: "éª¨é ­", price: 5, category: "Pet" },
  { id: 242, icon: "ğŸ¾", en: "Paw Print", ch: "è…³å°è²¼ç´™", price: 1, category: "Pet" },
  { id: 243, icon: "ğŸ¢", en: "Turtle", ch: "çƒé¾œ", price: 25, category: "Pet" },
  { id: 244, icon: "ğŸ¦", en: "Lizard", ch: "èœ¥èœ´", price: 30, category: "Pet" },
  { id: 245, icon: "ğŸ", en: "Snake", ch: "è›‡", price: 40, category: "Pet" },

  // è‡ªç„¶èˆ‡æ¤ç‰© (Nature)
  { id: 246, icon: "ğŸŒµ", en: "Cactus", ch: "ä»™äººæŒ", price: 8, category: "Plant" },
  { id: 247, icon: "ğŸŒ²", en: "Pine Tree", ch: "æ¾æ¨¹", price: 20, category: "Plant" },
  { id: 248, icon: "ğŸŒ³", en: "Tree", ch: "æ¨¹", price: 15, category: "Plant" },
  { id: 249, icon: "ğŸŒ´", en: "Palm Tree", ch: "æ£•æ«šæ¨¹", price: 25, category: "Plant" },
  { id: 250, icon: "ğŸŒ¹", en: "Rose", ch: "ç«ç‘°", price: 5, category: "Plant" },
  { id: 251, icon: "ğŸŒ»", en: "Sunflower", ch: "å‘æ—¥è‘µ", price: 4, category: "Plant" },
  { id: 252, icon: "ğŸŒ·", en: "Tulip", ch: "é¬±é‡‘é¦™", price: 4, category: "Plant" },
  { id: 253, icon: "ğŸŒ¼", en: "Daisy", ch: "é››èŠ", price: 3, category: "Plant" },
  { id: 254, icon: "ğŸ„", en: "Fungus", ch: "çœŸèŒ", price: 2, category: "Plant" },
  { id: 255, icon: "ğŸ‚", en: "Leaf", ch: "è‘‰å­", price: 1, category: "Plant" },

  // å¤©æ°£èˆ‡å¤©ç©º (Weather)
  { id: 256, icon: "â˜€ï¸", en: "Sun", ch: "å¤ªé™½", price: 0, category: "Weather" },
  { id: 257, icon: "ğŸŒ™", en: "Moon", ch: "æœˆäº®", price: 0, category: "Weather" },
  { id: 258, icon: "â­", en: "Star", ch: "æ˜Ÿæ˜Ÿ", price: 0, category: "Weather" },
  { id: 259, icon: "â˜ï¸", en: "Cloud", ch: "é›²", price: 0, category: "Weather" },
  { id: 260, icon: "ğŸŒ§ï¸", en: "Rain", ch: "é›¨", price: 0, category: "Weather" },
  { id: 261, icon: "â„ï¸", en: "Snowflake", ch: "é›ªèŠ±", price: 0, category: "Weather" },
  { id: 262, icon: "âš¡", en: "Lightning", ch: "é–ƒé›»", price: 0, category: "Weather" },
  { id: 263, icon: "ğŸŒˆ", en: "Rainbow", ch: "å½©è™¹", price: 0, category: "Weather" },
  { id: 264, icon: "â˜‚ï¸", en: "Umbrella", ch: "é›¨å‚˜", price: 8, category: "Weather" },
  { id: 265, icon: "â›„", en: "Snowman", ch: "é›ªäºº", price: 0, category: "Weather" },

  // æ›´å¤šæœé£¾ (Clothing)
  { id: 266, icon: "ğŸ§¥", en: "Coat", ch: "å¤§è¡£", price: 50, category: "Clothing" },
  { id: 267, icon: "ğŸ‘š", en: "Blouse", ch: "å¥³è¥¯è¡«", price: 20, category: "Clothing" },
  { id: 268, icon: "ğŸ‘”", en: "Tie", ch: "é ˜å¸¶", price: 10, category: "Clothing" },
  { id: 269, icon: "ğŸ§£", en: "Scarf", ch: "åœå·¾", price: 12, category: "Clothing" },
  { id: 270, icon: "ğŸ§¤", en: "Gloves", ch: "æ‰‹å¥—", price: 8, category: "Clothing" },
  { id: 271, icon: "ğŸ‘™", en: "Bikini", ch: "æ¯”åŸºå°¼", price: 25, category: "Clothing" },
  { id: 272, icon: "ğŸ©³", en: "Shorts", ch: "çŸ­è¤²", price: 15, category: "Clothing" },
  { id: 273, icon: "ğŸ‘ ", en: "High Heels", ch: "é«˜è·Ÿé‹", price: 45, category: "Clothing" },
  { id: 274, icon: "ğŸ¥¾", en: "Boots", ch: "é´å­", price: 55, category: "Clothing" },
  { id: 275, icon: "ğŸ‘‘", en: "Crown", ch: "çš‡å† ", price: 100, category: "Clothing" },

  // æ›´å¤šå·¥å…·èˆ‡ç‰©ä»¶
  { id: 276, icon: "ğŸ§¶", en: "Yarn", ch: "æ¯›ç·š", price: 4, category: "Craft" },
  { id: 277, icon: "ğŸ§µ", en: "Thread", ch: "ç·š", price: 2, category: "Craft" },
  { id: 278, icon: "ğŸ§·", en: "Safety Pin", ch: "å®‰å…¨åˆ¥é‡", price: 1, category: "Craft" },
  { id: 279, icon: "ğŸª¡", en: "Needle", ch: "é‡", price: 1, category: "Craft" },
  { id: 280, icon: "ğŸ’", en: "Ring", ch: "æˆ’æŒ‡", price: 200, category: "Jewelry" },
  { id: 281, icon: "ğŸ’", en: "Diamond", ch: "é‘½çŸ³", price: 500, category: "Jewelry" },
  { id: 282, icon: "ğŸ“¿", en: "Necklace", ch: "é …éŠ", price: 150, category: "Jewelry" },
  { id: 283, icon: "ğŸ’„", en: "Lipstick", ch: "å£ç´…", price: 25, category: "Beauty" },
  { id: 284, icon: "ğŸ’…", en: "Nail Polish", ch: "æŒ‡ç”²æ²¹", price: 10, category: "Beauty" },
  { id: 285, icon: "ğŸ’‡", en: "Haircut", ch: "å‰ªé«®", price: 30, category: "Service" },

  // æ›´å¤šæ—¥å¸¸é›œè²¨
  { id: 286, icon: "ğŸ“°", en: "Newspaper", ch: "å ±ç´™", price: 2, category: "Media" },
  { id: 287, icon: "ğŸ“˜", en: "Book", ch: "æ›¸", price: 15, category: "Media" },
  { id: 288, icon: "ğŸ“€", en: "DVD", ch: "å…‰ç¢Ÿ", price: 10, category: "Media" },
  { id: 289, icon: "ğŸ“…", en: "Calendar", ch: "æœˆæ›†", price: 8, category: "Daily" },
  { id: 290, icon: "ğŸ“", en: "Paperclip", ch: "è¿´ç´‹é‡", price: 1, category: "Stationery" },
  { id: 291, icon: "ğŸ“", en: "Ruler", ch: "å°º", price: 3, category: "Stationery" },
  { id: 292, icon: "ğŸ“", en: "Triangle Ruler", ch: "ä¸‰è§’æ¿", price: 3, category: "Stationery" },
  { id: 293, icon: "ğŸ“", en: "Folder", ch: "è³‡æ–™å¤¾", price: 2, category: "Stationery" },
  { id: 294, icon: "ğŸ“Œ", en: "Pushpin", ch: "åœ–é‡˜", price: 1, category: "Stationery" },
  { id: 295, icon: "ğŸ–ï¸", en: "Marker", ch: "éº¥å…‹ç­†", price: 3, category: "Stationery" },

  // å¡«å……æ›´å¤šé£Ÿç‰©
  { id: 296, icon: "ğŸ¥«", en: "Canned Food", ch: "ç½é ­", price: 4, category: "Food" },
  { id: 297, icon: "ğŸ¥£", en: "Cereal", ch: "éº¥ç‰‡", price: 6, category: "Breakfast" },
  { id: 298, icon: "ğŸ§ˆ", en: "Butter", ch: "å¥¶æ²¹", price: 5, category: "Dairy" },
  { id: 299, icon: "ğŸ¦", en: "Soft Serve", ch: "éœœæ·‡æ·‹", price: 4, category: "Dairy" },
  { id: 300, icon: "ğŸ§", en: "Shaved Ice", ch: "å‰‰å†°", price: 5, category: "Dessert" },
  { id: 301, icon: "ğŸ¨", en: "Sundae", ch: "è–ä»£", price: 7, category: "Dessert" },
  { id: 302, icon: "ğŸ¥®", en: "Mooncake", ch: "æœˆé¤…", price: 8, category: "Dessert" },
  { id: 303, icon: "ğŸ¡", en: "Dango", ch: "ç³°å­", price: 3, category: "Dessert" },
  { id: 304, icon: "ğŸ¢", en: "Oden", ch: "é—œæ±ç…®", price: 5, category: "Food" },
  { id: 305, icon: "ğŸœ", en: "Ramen", ch: "æ‹‰éºµ", price: 10, category: "Food" },
  { id: 306, icon: "ğŸ¥©", en: "Beef", ch: "ç‰›è‚‰", price: 15, category: "Meat" },
  { id: 307, icon: "ğŸ¥“", en: "Pork", ch: "è±¬è‚‰", price: 12, category: "Meat" },
  { id: 308, icon: "ğŸ–", en: "Ribs", ch: "è‚‹æ’", price: 18, category: "Meat" },
  { id: 309, icon: "ğŸ—", en: "Wing", ch: "é›ç¿…", price: 6, category: "Meat" },
  { id: 310, icon: "ğŸ¥ª", en: "Toast", ch: "åå¸", price: 3, category: "Bakery" },

  // é£²æ–™èˆ‡æ¶²é«”
  { id: 311, icon: "ğŸ¼", en: "Baby Bottle", ch: "å¥¶ç“¶", price: 8, category: "Baby" },
  { id: 312, icon: "ğŸ§Š", en: "Ice Cube", ch: "å†°å¡Š", price: 1, category: "Misc" },
  { id: 313, icon: "ğŸ¥¤", en: "Cola", ch: "å¯æ¨‚", price: 2, category: "Drink" },
  { id: 314, icon: "ğŸ§ƒ", en: "Apple Juice", ch: "è˜‹æœæ±", price: 3, category: "Drink" },
  { id: 315, icon: "ğŸ¥›", en: "Soy Milk", ch: "è±†æ¼¿", price: 3, category: "Drink" },
  { id: 316, icon: "ğŸ¶", en: "Sake", ch: "æ¸…é…’", price: 10, category: "Drink" },
  { id: 317, icon: "ğŸ¾", en: "Champagne", ch: "é¦™æª³", price: 25, category: "Drink" },
  { id: 318, icon: "ğŸ¥ƒ", en: "Whiskey", ch: "å¨å£«å¿Œ", price: 30, category: "Drink" },
  { id: 319, icon: "ğŸ§‰", en: "Mate", ch: "ç‘ªé»›èŒ¶", price: 5, category: "Drink" },
  { id: 320, icon: "ğŸ«–", en: "Teapot", ch: "èŒ¶å£º", price: 15, category: "Kitchen" },

  // æ›´å¤šç‰©å“
  { id: 321, icon: "ğŸ", en: "Gift", ch: "ç¦®ç‰©", price: 20, category: "Misc" },
  { id: 322, icon: "ğŸˆ", en: "Balloon", ch: "æ°£çƒ", price: 1, category: "Party" },
  { id: 323, icon: "ğŸ‰", en: "Party Popper", ch: "æ‹‰ç‚®", price: 2, category: "Party" },
  { id: 324, icon: "ğŸ§¨", en: "Firecracker", ch: "é­ç‚®", price: 5, category: "Party" },
  { id: 325, icon: "ğŸ", en: "Dolls", ch: "ç©å¶", price: 15, category: "Toy" },
  { id: 326, icon: "ğŸ", en: "Carp Streamer", ch: "é¯‰é­šæ——", price: 10, category: "Decor" },
  { id: 327, icon: "ğŸ", en: "Wind Chime", ch: "é¢¨éˆ´", price: 8, category: "Decor" },
  { id: 328, icon: "ğŸ§§", en: "Red Envelope", ch: "ç´…åŒ…", price: 5, category: "Misc" },
  { id: 329, icon: "ğŸ€", en: "Ribbon", ch: "ç·å¸¶", price: 1, category: "Misc" },
  { id: 330, icon: "ğŸª„", en: "Magic Wand", ch: "é­”æ–", price: 12, category: "Toy" },

  // ç¬¦è™Ÿèˆ‡æ¨™èªŒ
  { id: 331, icon: "ğŸ§", en: "Cash", ch: "ç¾é‡‘", price: 100, category: "Finance" },
  { id: 332, icon: "ğŸ’³", en: "Credit Card", ch: "ä¿¡ç”¨å¡", price: 0, category: "Finance" },
  { id: 333, icon: "ğŸ§¾", en: "Receipt", ch: "æ”¶æ“š", price: 0, category: "Finance" },
  { id: 334, icon: "ğŸ’¹", en: "Chart", ch: "åœ–è¡¨", price: 0, category: "Finance" },
  { id: 335, icon: "ğŸ’±", en: "Currency", ch: "è²¨å¹£", price: 0, category: "Finance" },
  { id: 336, icon: "ğŸ’²", en: "Dollar", ch: "ç¾å…ƒç¬¦è™Ÿ", price: 0, category: "Finance" },
  { id: 337, icon: "ğŸ“", en: "Pin", ch: "åœ°æ¨™", price: 0, category: "Map" },
  { id: 338, icon: "ğŸš©", en: "Flag", ch: "æ——å¹Ÿ", price: 5, category: "Map" },
  { id: 339, icon: "ğŸ›‘", en: "Stop Sign", ch: "åœæ­¢æ¨™èªŒ", price: 10, category: "Sign" },
  { id: 340, icon: "ğŸš§", en: "Construction", ch: "æ–½å·¥", price: 0, category: "Sign" },

  // æ›´å¤šéš¨æ©Ÿç‰©å“
  { id: 341, icon: "ğŸ—¿", en: "Statue", ch: "çŸ³åƒ", price: 50, category: "Art" },
  { id: 342, icon: "ğŸ«", en: "Ticket", ch: "ç¥¨", price: 10, category: "Misc" },
  { id: 343, icon: "ğŸ¬", en: "Clapper Board", ch: "å ´è¨˜æ¿", price: 15, category: "Media" },
  { id: 344, icon: "ğŸ¤", en: "Microphone", ch: "éº¥å…‹é¢¨", price: 30, category: "Media" },
  { id: 345, icon: "ğŸ¥", en: "Movie Camera", ch: "æ”å½±æ©Ÿ", price: 200, category: "Media" },
  { id: 346, icon: "ğŸ”«", en: "Water Gun", ch: "æ°´æ§", price: 5, category: "Toy" },
  { id: 347, icon: "ğŸ’£", en: "Bomb", ch: "ç‚¸å½ˆ", price: 50, category: "Weapon" },
  { id: 348, icon: "ğŸ›¡ï¸", en: "Shield", ch: "ç›¾ç‰Œ", price: 40, category: "Weapon" },
  { id: 349, icon: "ğŸ—¡ï¸", en: "Dagger", ch: "çŸ­åŠ", price: 25, category: "Weapon" },
  { id: 350, icon: "ğŸ¹", en: "Bow", ch: "å¼“", price: 35, category: "Weapon" },

  // æ›´å¤šè‡ªç„¶
  { id: 351, icon: "ğŸŒ", en: "Earth", ch: "åœ°çƒ", price: 0, category: "Space" },
  { id: 352, icon: "ğŸŒ‘", en: "New Moon", ch: "æ–°æœˆ", price: 0, category: "Space" },
  { id: 353, icon: "ğŸŒ‹", en: "Volcano", ch: "ç«å±±", price: 0, category: "Nature" },
  { id: 354, icon: "ğŸ”ï¸", en: "Mountain", ch: "å±±", price: 0, category: "Nature" },
  { id: 355, icon: "ğŸ–ï¸", en: "Beach", ch: "æµ·ç˜", price: 0, category: "Nature" },
  { id: 356, icon: "ğŸœï¸", en: "Desert", ch: "æ²™æ¼ ", price: 0, category: "Nature" },
  { id: 357, icon: "ğŸï¸", en: "Island", ch: "å³¶å¶¼", price: 0, category: "Nature" },
  { id: 358, icon: "ğŸï¸", en: "Park", ch: "å…¬åœ’", price: 0, category: "Nature" },
  { id: 359, icon: "ğŸŸï¸", en: "Stadium", ch: "é«”è‚²å ´", price: 0, category: "Place" },
  { id: 360, icon: "ğŸ ", en: "House", ch: "æˆ¿å­", price: 0, category: "Place" },

  // æ›´å¤šé£Ÿç‰© 361-400
  { id: 361, icon: "ğŸŒ°", en: "Hazelnut", ch: "æ¦›æœ", price: 6, category: "Nut" },
  { id: 362, icon: "ğŸ¥œ", en: "Walnut", ch: "æ ¸æ¡ƒ", price: 7, category: "Nut" },
  { id: 363, icon: "ğŸ¥”", en: "Chips", ch: "æ´‹èŠ‹ç‰‡", price: 3, category: "Snack" },
  { id: 364, icon: "ğŸ¥¨", en: "Pretzel", ch: "è´è¶é¤…", price: 3, category: "Snack" },
  { id: 365, icon: "ğŸ¥¯", en: "Bread Roll", ch: "é¤åŒ…", price: 2, category: "Bakery" },
  { id: 366, icon: "ğŸ¥–", en: "Baguette", ch: "æ³•æ£", price: 4, category: "Bakery" },
  { id: 367, icon: "ğŸ§€", en: "Cheddar", ch: "åˆ‡é”èµ·å¸", price: 5, category: "Dairy" },
  { id: 368, icon: "ğŸ¥¡", en: "Takeout Box", ch: "å¤–å¸¶ç›’", price: 1, category: "Misc" },
  { id: 369, icon: "ğŸ¥¢", en: "Bowl of Rice", ch: "ç™½é£¯", price: 2, category: "Food" },
  { id: 370, icon: "ğŸ¶", en: "Oil", ch: "æ²¹", price: 6, category: "Kitchen" },
  { id: 371, icon: "ğŸ¥˜", en: "Paella", ch: "ç‡‰é£¯", price: 12, category: "Food" },
  { id: 372, icon: "ğŸ¥—", en: "Salad", ch: "æ²™æ‹‰", price: 6, category: "Food" },
  { id: 373, icon: "ğŸ¥£", en: "Soup", ch: "æ¹¯", price: 5, category: "Food" },
  { id: 374, icon: "ğŸª", en: "Biscuit", ch: "é¤…ä¹¾", price: 2, category: "Snack" },
  { id: 375, icon: "ğŸ¥›", en: "Glass of Milk", ch: "ç‰›å¥¶æ¯", price: 2, category: "Drink" },
  { id: 376, icon: "ğŸ·", en: "Red Wine", ch: "ç´…é…’", price: 15, category: "Drink" },
  { id: 377, icon: "ğŸ¸", en: "Martini", ch: "é¦¬ä¸å°¼", price: 12, category: "Drink" },
  { id: 378, icon: "ğŸ¹", en: "Tropical Drink", ch: "ç†±å¸¶é£²æ–™", price: 8, category: "Drink" },
  { id: 379, icon: "ğŸº", en: "Mug of Beer", ch: "å•¤é…’æ¯", price: 5, category: "Drink" },
  { id: 380, icon: "ğŸ¼", en: "Milk Bottle", ch: "ç‰›å¥¶ç“¶", price: 3, category: "Drink" },
  { id: 381, icon: "ğŸ§‚", en: "Salt Shaker", ch: "é¹½ç½", price: 4, category: "Kitchen" },
  { id: 382, icon: "ğŸ¥«", en: "Tomato Sauce", ch: "ç•ªèŒ„é†¬", price: 3, category: "Food" },
  { id: 383, icon: "ğŸ¥Ÿ", en: "Potsticker", ch: "é‹è²¼", price: 6, category: "Food" },
  { id: 384, icon: "ğŸ¥ ", en: "Fortune Cookie", ch: "å¹¸é‹é¤…ä¹¾", price: 1, category: "Snack" },
  { id: 385, icon: "ğŸ¥¡", en: "Oyster Pail", ch: "å¤–è³£ç›’", price: 1, category: "Misc" },
  { id: 386, icon: "ğŸ¦", en: "Cone", ch: "ç”œç­’", price: 3, category: "Dessert" },
  { id: 387, icon: "ğŸ¥§", en: "Tart", ch: "å¡”", price: 5, category: "Dessert" },
  { id: 388, icon: "ğŸ§", en: "Cupcake", ch: "æ¯å­è›‹ç³•", price: 4, category: "Dessert" },
  { id: 389, icon: "ğŸ°", en: "Shortcake", ch: "è‰è“è›‹ç³•", price: 6, category: "Dessert" },
  { id: 390, icon: "ğŸ‚", en: "Birthday Cake", ch: "ç”Ÿæ—¥è›‹ç³•", price: 20, category: "Dessert" },
  { id: 391, icon: "ğŸ®", en: "Custard", ch: "å¡å£«é”", price: 3, category: "Dessert" },
  { id: 392, icon: "ğŸ­", en: "Swirl Lollipop", ch: "æ—‹è½‰æ£’æ£’ç³–", price: 2, category: "Snack" },
  { id: 393, icon: "ğŸ¬", en: "Wrapped Candy", ch: "ç³–æœ", price: 1, category: "Snack" },
  { id: 394, icon: "ğŸ«", en: "Chocolate Bar", ch: "å·§å…‹åŠ›æ£’", price: 2, category: "Snack" },
  { id: 395, icon: "ğŸ¿", en: "Popcorn Box", ch: "çˆ†ç±³èŠ±ç›’", price: 4, category: "Snack" },
  { id: 396, icon: "ğŸ©", en: "Glazed Donut", ch: "ç³–éœœç”œç”œåœˆ", price: 3, category: "Bakery" },
  { id: 397, icon: "ğŸª", en: "Choco Chip", ch: "å·§å…‹åŠ›é¤…ä¹¾", price: 2, category: "Snack" },
  { id: 398, icon: "ğŸ¥œ", en: "Nuts", ch: "å …æœ", price: 5, category: "Snack" },
  { id: 399, icon: "ğŸ¥£", en: "Porridge", ch: "ç²¥", price: 4, category: "Food" },
  { id: 400, icon: "ğŸ¥©", en: "Raw Meat", ch: "ç”Ÿè‚‰", price: 10, category: "Meat" },

  // æ›´å¤šç‰©å“ 401-450
  { id: 401, icon: "ğŸš‚", en: "Locomotive", ch: "ç«è»Šé ­", price: 50, category: "Toy" },
  { id: 402, icon: "ğŸšƒ", en: "Train Car", ch: "è»Šå»‚", price: 40, category: "Toy" },
  { id: 403, icon: "ğŸš„", en: "Bullet Train", ch: "æ–°å¹¹ç·š", price: 60, category: "Toy" },
  { id: 404, icon: "ğŸš…", en: "High Speed Train", ch: "é«˜éµ", price: 60, category: "Toy" },
  { id: 405, icon: "ğŸš†", en: "Train", ch: "ç«è»Š", price: 50, category: "Toy" },
  { id: 406, icon: "ğŸš‡", en: "Metro", ch: "æ·é‹", price: 50, category: "Toy" },
  { id: 407, icon: "ğŸšˆ", en: "Light Rail", ch: "è¼•è»Œ", price: 50, category: "Toy" },
  { id: 408, icon: "ğŸš‰", en: "Station", ch: "è»Šç«™", price: 100, category: "Toy" },
  { id: 409, icon: "ğŸš‹", en: "Tram", ch: "è·¯é¢é›»è»Š", price: 40, category: "Toy" },
  { id: 410, icon: "ğŸšŒ", en: "Bus", ch: "å…¬è»Š", price: 30, category: "Toy" },
  { id: 411, icon: "ğŸš", en: "Oncoming Bus", ch: "è¿é¢å…¬è»Š", price: 30, category: "Toy" },
  { id: 412, icon: "ğŸš", en: "Trolleybus", ch: "ç„¡è»Œé›»è»Š", price: 30, category: "Toy" },
  { id: 413, icon: "ğŸš", en: "Minibus", ch: "å°å·´", price: 25, category: "Toy" },
  { id: 414, icon: "ğŸš‘", en: "Ambulance", ch: "æ•‘è­·è»Š", price: 35, category: "Toy" },
  { id: 415, icon: "ğŸš’", en: "Fire Engine", ch: "æ¶ˆé˜²è»Š", price: 40, category: "Toy" },
  { id: 416, icon: "ğŸš“", en: "Police Car", ch: "è­¦è»Š", price: 35, category: "Toy" },
  { id: 417, icon: "ğŸš•", en: "Taxi", ch: "è¨ˆç¨‹è»Š", price: 25, category: "Toy" },
  { id: 418, icon: "ğŸš—", en: "Car", ch: "æ±½è»Š", price: 50, category: "Toy" },
  { id: 419, icon: "ğŸš™", en: "SUV", ch: "ä¼‘æ—…è»Š", price: 60, category: "Toy" },
  { id: 420, icon: "ğŸšš", en: "Truck", ch: "å¡è»Š", price: 45, category: "Toy" },
  { id: 421, icon: "ğŸšœ", en: "Tractor", ch: "æ‹–æ‹‰æ©Ÿ", price: 55, category: "Toy" },
  { id: 422, icon: "ğŸï¸", en: "Racing Car", ch: "è³½è»Š", price: 80, category: "Toy" },
  { id: 423, icon: "ğŸï¸", en: "Motorcycle", ch: "æ‘©æ‰˜è»Š", price: 40, category: "Toy" },
  { id: 424, icon: "ğŸ›µ", en: "Scooter", ch: "æ©Ÿè»Š", price: 35, category: "Toy" },
  { id: 425, icon: "ğŸš²", en: "Bike", ch: "å–®è»Š", price: 20, category: "Toy" },
  { id: 426, icon: "ğŸ›´", en: "Kick Scooter", ch: "æ»‘æ¿è»Š", price: 15, category: "Toy" },
  { id: 427, icon: "ğŸš", en: "Bus Stop", ch: "å…¬è»Šç«™", price: 10, category: "Toy" },
  { id: 428, icon: "ğŸ›£ï¸", en: "Motorway", ch: "é«˜é€Ÿå…¬è·¯", price: 5, category: "Toy" },
  { id: 429, icon: "ğŸ›¤ï¸", en: "Railway", ch: "éµè·¯", price: 5, category: "Toy" },
  { id: 430, icon: "ğŸ›¢ï¸", en: "Oil Drum", ch: "æ²¹æ¡¶", price: 20, category: "Misc" },
  { id: 431, icon: "â›½", en: "Fuel Pump", ch: "åŠ æ²¹æ©Ÿ", price: 100, category: "Misc" },
  { id: 432, icon: "ğŸš¨", en: "Siren", ch: "è­¦å ±å™¨", price: 15, category: "Misc" },
  { id: 433, icon: "ğŸš¥", en: "Traffic Light", ch: "ç´…ç¶ ç‡ˆ", price: 50, category: "Misc" },
  { id: 434, icon: "ğŸ›‘", en: "Stop", ch: "åœè»Š", price: 10, category: "Misc" },
  { id: 435, icon: "ğŸš§", en: "Barrier", ch: "è·¯éšœ", price: 20, category: "Misc" },
  { id: 436, icon: "âš“", en: "Anchor", ch: "éŒ¨", price: 60, category: "Misc" },
  { id: 437, icon: "â›µ", en: "Sailboat", ch: "å¸†èˆ¹", price: 200, category: "Toy" },
  { id: 438, icon: "ğŸ›¶", en: "Canoe", ch: "ç¨æœ¨èˆŸ", price: 150, category: "Toy" },
  { id: 439, icon: "ğŸš¤", en: "Speedboat", ch: "å¿«è‰‡", price: 300, category: "Toy" },
  { id: 440, icon: "ğŸš¢", en: "Ship", ch: "è¼ªèˆ¹", price: 500, category: "Toy" },
  { id: 441, icon: "âœˆï¸", en: "Airplane", ch: "é£›æ©Ÿ", price: 400, category: "Toy" },
  { id: 442, icon: "ğŸ›©ï¸", en: "Small Plane", ch: "å°é£›æ©Ÿ", price: 300, category: "Toy" },
  { id: 443, icon: "ğŸ›«", en: "Departure", ch: "èµ·é£›", price: 0, category: "Misc" },
  { id: 444, icon: "ğŸ›¬", en: "Arrival", ch: "é™è½", price: 0, category: "Misc" },
  { id: 445, icon: "ğŸª‚", en: "Parachute", ch: "é™è½å‚˜", price: 80, category: "Outdoor" },
  { id: 446, icon: "ğŸ’º", en: "Seat", ch: "åº§ä½", price: 50, category: "Misc" },
  { id: 447, icon: "ğŸš", en: "Helicopter", ch: "ç›´å‡æ©Ÿ", price: 450, category: "Toy" },
  { id: 448, icon: "ğŸšŸ", en: "Suspension Railway", ch: "æ‡¸æ›éµè·¯", price: 100, category: "Toy" },
  { id: 449, icon: "ğŸš ", en: "Cable Car", ch: "çºœè»Š", price: 80, category: "Toy" },
  { id: 450, icon: "ğŸš¡", en: "Aerial Tramway", ch: "ç©ºä¸­çºœè»Š", price: 90, category: "Toy" },

  // æ›´å¤šéš¨æ©Ÿé›œè²¨ 451-500
  { id: 451, icon: "ğŸš€", en: "Rocket", ch: "ç«ç®­", price: 1000, category: "Toy" },
  { id: 452, icon: "ğŸ›¸", en: "UFO", ch: "é£›ç¢Ÿ", price: 2000, category: "Toy" },
  { id: 453, icon: "ğŸ›ï¸", en: "Bell", ch: "æœå‹™éˆ´", price: 15, category: "Misc" },
  { id: 454, icon: "ğŸ§³", en: "Luggage", ch: "è¡Œæ", price: 60, category: "Travel" },
  { id: 455, icon: "ğŸŒ‚", en: "Closed Umbrella", ch: "æ”¶èµ·çš„å‚˜", price: 8, category: "Daily" },
  { id: 456, icon: "â˜‚ï¸", en: "Open Umbrella", ch: "é–‹è‘—çš„å‚˜", price: 8, category: "Daily" },
  { id: 457, icon: "â›±ï¸", en: "Parasol", ch: "é®é™½å‚˜", price: 20, category: "Outdoor" },
  { id: 458, icon: "âš¡", en: "Bolt", ch: "é›·é›»", price: 0, category: "Weather" },
  { id: 459, icon: "â„ï¸", en: "Snow", ch: "é›ª", price: 0, category: "Weather" },
  { id: 460, icon: "â˜ƒï¸", en: "Snowman", ch: "å †é›ªäºº", price: 0, category: "Weather" },
  { id: 461, icon: "ğŸ”¥", en: "Fire", ch: "ç«", price: 0, category: "Misc" },
  { id: 462, icon: "ğŸ’§", en: "Droplet", ch: "æ°´æ»´", price: 0, category: "Misc" },
  { id: 463, icon: "ğŸŒŠ", en: "Wave", ch: "æµ·æµª", price: 0, category: "Misc" },
  { id: 464, icon: "ğŸƒ", en: "Jack-O-Lantern", ch: "å—ç“œç‡ˆ", price: 15, category: "Decor" },
  { id: 465, icon: "ğŸ„", en: "Christmas Tree", ch: "è–èª•æ¨¹", price: 50, category: "Decor" },
  { id: 466, icon: "ğŸ†", en: "Fireworks", ch: "ç…™ç«", price: 20, category: "Party" },
  { id: 467, icon: "ğŸ‡", en: "Sparkler", ch: "ä»™å¥³æ£’", price: 5, category: "Party" },
  { id: 468, icon: "ğŸ§¨", en: "Cracker", ch: "çˆ†ç«¹", price: 8, category: "Party" },
  { id: 469, icon: "ğŸˆ", en: "Red Balloon", ch: "ç´…æ°£çƒ", price: 2, category: "Party" },
  { id: 470, icon: "ğŸ‰", en: "Confetti", ch: "å½©å¸¶", price: 5, category: "Party" },
  { id: 471, icon: "ğŸŠ", en: "Confetti Ball", ch: "å½©çƒ", price: 10, category: "Party" },
  { id: 472, icon: "ğŸ‹", en: "Tanabata Tree", ch: "è¨±é¡˜æ¨¹", price: 20, category: "Decor" },
  { id: 473, icon: "ğŸ", en: "Pine Decoration", ch: "é–€æ¾", price: 25, category: "Decor" },
  { id: 474, icon: "ğŸ", en: "Japanese Dolls", ch: "å¥³å…’ç¯€å¨ƒå¨ƒ", price: 80, category: "Decor" },
  { id: 475, icon: "ğŸ", en: "Carp", ch: "é¯‰é­šæ——", price: 15, category: "Decor" },
  { id: 476, icon: "ğŸ", en: "Chime", ch: "é¢¨éˆ´", price: 12, category: "Decor" },
  { id: 477, icon: "ğŸ‘", en: "Moon Viewing", ch: "è³æœˆ", price: 0, category: "Decor" },
  { id: 478, icon: "ğŸ§§", en: "Red Packet", ch: "ç´…åŒ…", price: 10, category: "Misc" },
  { id: 479, icon: "ğŸ€", en: "Pink Ribbon", ch: "ç²‰ç´…ç·å¸¶", price: 2, category: "Misc" },
  { id: 480, icon: "ğŸ", en: "Wrapped Gift", ch: "ç¦®ç‰©ç›’", price: 25, category: "Misc" },
  { id: 481, icon: "ğŸ—ï¸", en: "Reminder Ribbon", ch: "é»ƒçµ²å¸¶", price: 1, category: "Misc" },
  { id: 482, icon: "ğŸŸï¸", en: "Admission Ticket", ch: "å…¥å ´åˆ¸", price: 15, category: "Misc" },
  { id: 483, icon: "ğŸ«", en: "Pass", ch: "é€šè¡Œè­‰", price: 10, category: "Misc" },
  { id: 484, icon: "ğŸ–ï¸", en: "Medal", ch: "å‹³ç« ", price: 20, category: "Misc" },
  { id: 485, icon: "ğŸ†", en: "Trophy", ch: "çç›ƒ", price: 50, category: "Misc" },
  { id: 486, icon: "ğŸ…", en: "Sports Medal", ch: "é«”è‚²çç‰Œ", price: 15, category: "Misc" },
  { id: 487, icon: "ğŸ¥‡", en: "1st Place", ch: "ç¬¬ä¸€å", price: 100, category: "Misc" },
  { id: 488, icon: "ğŸ¥ˆ", en: "2nd Place", ch: "ç¬¬äºŒå", price: 80, category: "Misc" },
  { id: 489, icon: "ğŸ¥‰", en: "3rd Place", ch: "ç¬¬ä¸‰å", price: 50, category: "Misc" },
  { id: 490, icon: "âš½", en: "Soccer", ch: "è¶³çƒ", price: 20, category: "Sports" },
  { id: 491, icon: "âš¾", en: "Baseball", ch: "æ£’çƒ", price: 15, category: "Sports" },
  { id: 492, icon: "ğŸ¥", en: "Softball", ch: "å£˜çƒ", price: 15, category: "Sports" },
  { id: 493, icon: "ğŸ€", en: "Basket Ball", ch: "ç±ƒçƒ", price: 25, category: "Sports" },
  { id: 494, icon: "ğŸ", en: "Volley Ball", ch: "æ’çƒ", price: 20, category: "Sports" },
  { id: 495, icon: "ğŸˆ", en: "American Football", ch: "ç¾å¼è¶³çƒ", price: 30, category: "Sports" },
  { id: 496, icon: "ğŸ‰", en: "Rugby", ch: "æ©„æ¬–çƒ", price: 30, category: "Sports" },
  { id: 497, icon: "ğŸ¾", en: "Tennis", ch: "ç¶²çƒ", price: 10, category: "Sports" },
  { id: 498, icon: "ğŸ¥", en: "Frisbee", ch: "é£›ç›¤", price: 5, category: "Sports" },
  { id: 499, icon: "ğŸ³", en: "Bowling", ch: "ä¿é½¡çƒ", price: 40, category: "Sports" },
  { id: 500, icon: "ğŸ", en: "Cricket", ch: "æ¿çƒ", price: 35, category: "Sports" },
];

export default function SupermarketRush() {
  const [gameState, setGameState] = useState('menu'); // menu, playing, gameover, soldout
  const [money, setMoney] = useState(0);
  const [currentItem, setCurrentItem] = useState(null);
  const [options, setOptions] = useState([]);
  const [feedback, setFeedback] = useState(null); // null, 'correct', 'wrong', 'missed'
  const [streak, setStreak] = useState(0);
  const [timeLeft, setTimeLeft] = useState(60); 
  const [customerIndex, setCustomerIndex] = useState(0);
  
  // ä½¿ç”¨ useRef ä¾†ç´€éŒ„è©²å›åˆé–‹å§‹çš„æº–ç¢ºæ™‚é–“é»
  const startTimeRef = useRef(0);
  // ä½¿ç”¨ useRef ä¾†ç´€éŒ„å·²ç­”å°çš„å•†å“ IDï¼Œé¿å…é–‰åŒ…å•é¡Œ
  const completedItemsRef = useRef(new Set());

  // åˆå§‹åŒ–éŠæˆ²
  const startGame = () => {
    setMoney(100);
    setStreak(0);
    setTimeLeft(120); // å¢åŠ æ™‚é–“åˆ° 120 ç§’ï¼Œå› ç‚ºå•†å“è®Šå¤šäº†ï¼
    setGameState('playing');
    setCustomerIndex(0);
    completedItemsRef.current.clear(); // æ¸…ç©ºå·²å®Œæˆåˆ—è¡¨
    generateNextRound();
  };

  // ç”¢ç”Ÿä¸‹ä¸€é¡Œ
  const generateNextRound = useCallback(() => {
    // éæ¿¾å‡ºå°šæœªç­”å°çš„å•†å“
    const availableItems = MARKET_ITEMS.filter(item => !completedItemsRef.current.has(item.id));

    // å¦‚æœæ‰€æœ‰å•†å“éƒ½è³£å…‰äº†
    if (availableItems.length === 0) {
      setGameState('soldout');
      return;
    }

    // å¾å‰©ä¸‹å¯ç”¨çš„å•†å“ä¸­éš¨æ©Ÿé¸ä¸€å€‹
    const correctItem = availableItems[Math.floor(Math.random() * availableItems.length)];
    
    // éŒ¯èª¤é¸é … (Distractors) å¯ä»¥å¾æ‰€æœ‰å•†å“ä¸­é¸ï¼Œé€™æ¨£æ··æ·†æ€§æ¯”è¼ƒé«˜
    const otherItems = MARKET_ITEMS.filter(item => item.id !== correctItem.id);
    const shuffledOthers = otherItems.sort(() => 0.5 - Math.random());
    const distractors = shuffledOthers.slice(0, 3);
    const roundOptions = [correctItem, ...distractors].sort(() => 0.5 - Math.random());

    setCurrentItem(correctItem);
    setOptions(roundOptions);
    setFeedback(null);
    setCustomerIndex(prev => prev + 1);
    
    // è¨­å®šé€™ä¸€é¡Œçš„é–‹å§‹æ™‚é–“
    startTimeRef.current = Date.now();
  }, []);

  // é€™ä¸€å±€çš„è¨ˆæ™‚å™¨ (è™•ç† Miss é‚è¼¯ - 5ç§’)
  useEffect(() => {
    if (gameState !== 'playing' || feedback !== null || !currentItem) return;

    const roundTimer = setTimeout(() => {
        handleMiss();
    }, 5000);

    return () => clearTimeout(roundTimer);
  }, [currentItem, feedback, gameState]);

  // å€’æ•¸è¨ˆæ™‚å™¨ (éŠæˆ²ç¸½æ™‚é–“)
  useEffect(() => {
    if (gameState !== 'playing') return;
    const timer = setInterval(() => {
      setTimeLeft(prev => {
        if (prev <= 1) {
          setGameState('gameover');
          return 0;
        }
        return prev - 1;
      });
    }, 1000);
    return () => clearInterval(timer);
  }, [gameState]);

  // è™•ç†è¶…æ™‚ (Miss)
  const handleMiss = () => {
      const penalty = 15;
      setMoney(prev => Math.max(0, prev - penalty));
      setStreak(0);
      setFeedback({ type: 'missed', val: penalty, correctEn: currentItem.en, correctCh: currentItem.ch });
      
      // Miss ä¸ç®—ç­”å°ï¼Œæ‰€ä»¥ä¸åŠ å…¥ completedItemsRefï¼Œä¸‹æ¬¡é‚„æœƒå‡ºç¾
      
      setTimeout(() => {
        generateNextRound();
      }, 1500);
  };

  // è™•ç†ç©å®¶å›ç­”
  const handleAnswer = (selectedItem) => {
    if (feedback !== null) return; 

    if (selectedItem.id === currentItem.id) {
      // --- ç­”å°é‚è¼¯ ---
      const now = Date.now();
      const timeTaken = now - startTimeRef.current; // èŠ±è²»æ¯«ç§’æ•¸
      
      let timeMultiplier = 1;
      const maxDuration = 5000; // ç¸½æ™‚é–“ 5ç§’
      const gracePeriod = 2500; // å¯¬é™æœŸ 2.5ç§’ (åœ¨æ­¤æ™‚é–“å…§ç­”å°çš†ç‚º 100%)

      // è¶…éå¯¬é™æœŸæ‰é–‹å§‹æ‰£åˆ†
      if (timeTaken > gracePeriod) {
          const decayDuration = maxDuration - gracePeriod; // å‰©ä¸‹ 2.5ç§’ ç”¨ä¾†éæ¸›
          const overflowTime = Math.min(timeTaken - gracePeriod, decayDuration);
          
          // è¨ˆç®—æŠ˜æ‰£æ¯”ä¾‹
          const decay = overflowTime / decayDuration;
          timeMultiplier = 1 - decay;
          
          // æœ€ä½ä¿åº• 10%
          timeMultiplier = Math.max(0.1, timeMultiplier);
      }

      const baseProfit = Math.round(currentItem.price * timeMultiplier);
      const streakBonus = Math.floor(streak / 5) * 2;
      const totalProfit = baseProfit + streakBonus;
      
      setMoney(prev => prev + totalProfit);
      setStreak(prev => prev + 1);
      
      // åŠ å…¥å·²å®Œæˆåˆ—è¡¨ (ä¸é‡è¤‡å‡ºç¾)
      completedItemsRef.current.add(currentItem.id);
      
      const percentage = Math.round(timeMultiplier * 100);
      setFeedback({ type: 'correct', val: totalProfit, percentage: percentage });
      
      setTimeout(() => {
        generateNextRound();
      }, 1200);
    } else {
      // --- ç­”éŒ¯é‚è¼¯ ---
      const penalty = 10;
      setMoney(prev => Math.max(0, prev - penalty));
      setStreak(0);
      setFeedback({ type: 'wrong', val: penalty, correctEn: currentItem.en, correctCh: currentItem.ch });
      
      // ç­”éŒ¯ä¹Ÿä¸åŠ å…¥ completedItemsRefï¼Œè®“ç©å®¶æœ‰æ©Ÿæœƒå†ç·´ç¿’ä¸€æ¬¡
      
      setTimeout(() => {
        generateNextRound();
      }, 1500);
    }
  };

  // UI å€å¡Š

  if (gameState === 'menu') {
    return (
      <div className="min-h-screen bg-sky-100 flex items-center justify-center font-sans p-4">
        <div className="bg-white p-8 rounded-3xl shadow-xl max-w-sm w-full text-center border-b-8 border-sky-200">
          <div className="w-24 h-24 bg-sky-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg">
            <ShoppingBasket size={48} className="text-white" />
          </div>
          <h1 className="text-3xl font-black text-slate-800 mb-2">Supermarket Rush</h1>
          <p className="text-slate-500 mb-8">5ç§’æŒ‘æˆ°ï¼<br/>2.5ç§’å…§ç­”å°çé‡‘å…¨æ‹¿ï¼</p>
          <button onClick={startGame} className="w-full bg-green-500 hover:bg-green-600 text-white font-bold text-xl py-4 rounded-xl shadow-lg transform transition active:scale-95 flex items-center justify-center gap-2">
            é–‹å§‹ä¸Šç­ (Start)
          </button>
        </div>
      </div>
    );
  }

  // å…±ç”¨çš„éŠæˆ²çµæŸ/å®Œå”®ç•«é¢
  if (gameState === 'gameover' || gameState === 'soldout') {
    return (
      <div className="min-h-screen bg-slate-800 flex items-center justify-center font-sans p-4">
        <div className="bg-white p-8 rounded-3xl shadow-2xl max-w-sm w-full text-center animate-in zoom-in duration-300 relative overflow-hidden">
          {/* å½©å¸¶ç‰¹æ•ˆ (åƒ…å®Œå”®æ™‚é¡¯ç¤º) */}
          {gameState === 'soldout' && <div className="absolute inset-0 bg-yellow-100/20 pointer-events-none"></div>}
          
          <div className="text-6xl mb-4">{gameState === 'soldout' ? 'ğŸ†' : 'ğŸª'}</div>
          
          <h2 className="text-2xl font-bold text-slate-800 mb-2">
            {gameState === 'soldout' ? 'æ‰€æœ‰å•†å“å®Œå”®ï¼' : 'ä»Šæ—¥ç‡Ÿæ¥­çµæŸ!'}
          </h2>
          
          <p className="text-slate-500 mb-6">
             {gameState === 'soldout' ? 'å¤ªå²å®³äº†ï¼ä½ æ¸…ç©ºäº†æ‰€æœ‰åº«å­˜ï¼' : 'æ™‚é–“åˆ°äº†ï¼Œæ˜å¤©è«‹æ—©ï¼'}
          </p>

          <div className="bg-slate-100 p-4 rounded-xl mb-6">
            <p className="text-slate-500 text-sm">ç¸½æ”¶å…¥ (Total Revenue)</p>
            <p className="text-4xl font-black text-green-600">${money}</p>
          </div>
          <button onClick={startGame} className="w-full bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 rounded-xl shadow-lg flex items-center justify-center gap-2">
            <RefreshCcw size={20} /> å†ç©ä¸€æ¬¡
          </button>
        </div>
      </div>
    );
  }

  // è¨ˆç®—å•†å“å®¹å™¨çš„æ¨£å¼
  const getItemContainerStyle = () => {
    let baseClass = "w-40 h-40 flex flex-col items-center justify-center relative transition-all duration-200 ";
    
    if (feedback?.type === 'wrong') {
      return baseClass + "bg-red-100/80 rounded-full shadow-lg ring-4 ring-red-400";
    }
    if (feedback?.type === 'correct') {
      return baseClass + "bg-green-100/80 rounded-full shadow-lg ring-4 ring-green-400";
    }
    
    return baseClass;
  };

  // è¨ˆç®—å•†å“çš„å‹•ç•« Class
  const getItemAnimationClass = () => {
    if (feedback?.type === 'correct') return 'animate-zoom-out-left'; 
    if (feedback?.type === 'wrong') return 'shake'; 
    if (feedback?.type === 'missed') return 'opacity-0'; 
    return 'animate-move-across'; 
  };

  return (
    <div className="min-h-screen bg-slate-200 flex flex-col font-sans max-w-md mx-auto shadow-2xl overflow-hidden relative border-x border-slate-300">
      
      {/* HUD */}
      <div className="bg-slate-800 text-white p-4 flex justify-between items-center z-10 shadow-md">
        <div className="flex flex-col">
          <span className="text-xs text-slate-400 font-bold uppercase tracking-wider">Revenue</span>
          <div className="flex items-center text-green-400 font-mono font-bold text-2xl">
            <DollarSign size={20} />
            {money}
          </div>
        </div>
        <div className="flex flex-col items-center">
           <span className="text-xs text-slate-400">Time</span>
           <span className={`font-bold text-xl ${timeLeft < 10 ? 'text-red-500 animate-pulse' : 'text-white'}`}>
             {timeLeft}s
           </span>
        </div>
        <div className="flex flex-col items-end">
          <span className="text-xs text-slate-400 font-bold uppercase tracking-wider">Streak</span>
          <div className="flex items-center text-orange-400 font-bold text-xl">
            <TrendingUp size={16} className="mr-1" />
            x{streak}
          </div>
        </div>
      </div>

      {/* éŠæˆ²å ´æ™¯ï¼šæ«ƒæª¯å€ */}
      <div className="flex-1 bg-sky-50 relative flex flex-col justify-center overflow-hidden">
        
        {/* èƒŒæ™¯è£é£¾ */}
        <div className="absolute top-4 left-4 opacity-10 pointer-events-none">
            <div className="w-24 h-4 bg-slate-800 rounded mb-2"></div>
            <div className="w-24 h-4 bg-slate-800 rounded mb-2"></div>
        </div>
        <div className="absolute top-4 right-4 opacity-10 pointer-events-none">
            <div className="w-24 h-4 bg-slate-800 rounded mb-2"></div>
            <div className="w-24 h-4 bg-slate-800 rounded mb-2"></div>
        </div>

        {/* é¡§å®¢ (å·¦ä¸Šè§’) */}
        <div className="absolute top-6 left-6 flex flex-col items-center transition-all duration-500 z-0 opacity-50">
           <div className="bg-white p-2 rounded-full shadow-sm border-2 border-slate-100">
             <User size={30} className="text-slate-400" />
           </div>
        </div>

        {/* è¼¸é€å¸¶ (è¦–è¦ºå±¤) - ç´‹ç†å‹•ç•«å‘å·¦ */}
        <div className="w-full h-40 bg-slate-300 absolute bottom-0 flex items-center justify-center border-t-4 border-slate-400">
            <div className="absolute inset-0 flex space-x-12 animate-slide-left opacity-20">
                {[...Array(10)].map((_, i) => (
                    <div key={i} className="w-2 h-full bg-slate-500 transform skew-x-12"></div>
                ))}
            </div>
        </div>

        {/* å•†å“ç§»å‹•è»Œé“ (é‚è¼¯å±¤) */}
        {/* key=currentItem.id ç¢ºä¿åˆ‡æ›å•†å“æ™‚é‡ç½®å‹•ç•« */}
        <div key={currentItem?.id} className={`absolute w-full flex items-center z-10 ${getItemAnimationClass()}`}>
            
            {/* å•†å“æœ¬é«” */}
            <div className={getItemContainerStyle()}>
                {/* åœ–ç¤º */}
                <span className="text-8xl drop-shadow-lg filter leading-none transform transition-transform hover:scale-110">{currentItem?.icon}</span>
                
                {/* åƒ¹æ ¼æ¨™ç±¤ */}
                <span className="absolute -top-2 -right-2 bg-yellow-400 text-yellow-900 font-bold px-2 py-1 rounded text-sm shadow-md rotate-12 border border-yellow-200">
                ${currentItem?.price}
                </span>

                {/* éŒ¯èª¤æç¤ºå±¤ */}
                {feedback?.type === 'wrong' && (
                    <div className="absolute inset-0 flex flex-col items-center justify-center z-20">
                        <XCircle size={64} className="text-red-600 drop-shadow-md animate-ping" />
                    </div>
                )}

                {/* æ­£ç¢ºæç¤ºå±¤ (é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ + æ•ˆç‡ç™¾åˆ†æ¯”) */}
                {feedback?.type === 'correct' && (
                    <div className="absolute inset-0 flex flex-col items-center justify-center z-20">
                        <CheckCircle size={40} className="text-green-600 mb-1 drop-shadow-md" />
                        <span className="text-green-900 font-black text-2xl tracking-tight drop-shadow-sm">{currentItem?.en}</span>
                        <span className="text-green-700 font-bold text-lg drop-shadow-sm">{currentItem?.ch}</span>
                        {/* é¡¯ç¤ºæ™‚é–“æ•ˆç‡çå‹µ */}
                        {feedback.percentage < 100 && (
                          <span className="bg-yellow-100 text-yellow-800 text-xs font-bold px-2 py-0.5 rounded-full mt-1 border border-yellow-200">
                            Speed: {feedback.percentage}%
                          </span>
                        )}
                        {feedback.percentage === 100 && (
                          <span className="bg-red-100 text-red-600 text-xs font-black px-2 py-0.5 rounded-full mt-1 border border-red-200 animate-pulse">
                            PERFECT!
                          </span>
                        )}
                    </div>
                )}
            </div>
        </div>

        {/* Missed Feedback Overlay (ç•¶ç‰©å“æ¶ˆå¤±å¾Œé¡¯ç¤ºåœ¨ç•«é¢ä¸­å¤®) */}
        {feedback?.type === 'missed' && (
             <div className="absolute inset-0 flex flex-col items-center justify-center bg-black/40 z-30 animate-in fade-in duration-200 backdrop-blur-sm">
                <div className="bg-white p-6 rounded-3xl shadow-2xl flex flex-col items-center transform scale-110">
                    <AlertCircle size={48} className="text-red-500 mb-2" />
                    <h3 className="text-red-600 font-black text-2xl uppercase tracking-wider mb-2">Missed!</h3>
                    <div className="bg-slate-100 px-6 py-3 rounded-xl w-full text-center">
                        <p className="text-4xl mb-2">{currentItem?.icon}</p>
                        <p className="text-slate-800 font-bold text-xl">{currentItem?.en}</p>
                        <p className="text-slate-500 text-sm">{currentItem?.ch}</p>
                    </div>
                    <p className="text-red-500 font-bold mt-4 animate-pulse">-${feedback.val}</p>
                </div>
             </div>
        )}

        {/* éŒ¯èª¤å›é¥‹ Overlay (ç•¶é»é¸éŒ¯èª¤æ™‚ï¼Œé¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆåœ¨ä¸­å¤®) */}
        {feedback?.type === 'wrong' && (
             <div className="absolute inset-0 flex flex-col items-center justify-center bg-black/20 z-30 animate-in fade-in duration-200">
                <div className="bg-white/90 p-4 rounded-2xl shadow-xl flex flex-col items-center backdrop-blur-md">
                    <XCircle size={32} className="text-red-500 mb-2" />
                    <p className="text-slate-800 font-bold text-lg">{currentItem?.en}</p>
                    <p className="text-slate-500 text-sm">{currentItem?.ch}</p>
                    <p className="text-red-500 font-bold mt-2">-${feedback.val}</p>
                </div>
             </div>
        )}

        {/* æµ®å‹•çš„é‡‘é¡æ–‡å­— (æ­£ç¢ºæ™‚) */}
        {feedback?.type === 'correct' && (
          <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-32 text-5xl font-black animate-float-up z-20 text-green-500">
             +${feedback.val}
          </div>
        )}

      </div>

      {/* æ”¶éŠ€æ©ŸæŒ‰éˆ• */}
      <div className="bg-white p-6 pb-8 rounded-t-3xl shadow-[0_-5px_20px_rgba(0,0,0,0.1)] z-20">
        <div className="flex items-center gap-2 mb-4 text-slate-400 text-sm font-bold uppercase tracking-wider">
           <ShoppingCart size={14} /> Quick Select
        </div>
        
        <div className="grid grid-cols-2 gap-3">
          {options.map((option, index) => (
            <button
              key={index}
              onClick={() => handleAnswer(option)}
              disabled={feedback !== null}
              className={`
                h-16 rounded-xl font-bold text-lg transition-all transform active:scale-95 shadow-sm border-b-4 
                ${feedback !== null 
                    ? (option.id === currentItem.id 
                        ? 'bg-green-500 border-green-700 text-white'
                        : 'bg-gray-100 border-gray-200 text-gray-300')
                    : 'bg-slate-100 border-slate-300 text-slate-700 hover:bg-sky-50 hover:border-sky-300 hover:text-sky-700'
                }
              `}
            >
              {option.en}
            </button>
          ))}
        </div>
      </div>

      <style>{`
        /* è¼¸é€å¸¶ç´‹ç†å‹•ç•« (å‘å·¦æµå‹•) */
        @keyframes slide-left {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50px); }
        }
        .animate-slide-left {
          animation: slide-left 1s linear infinite;
        }

        /* å•†å“ç§»å‹•å‹•ç•«ï¼šå¾å³å´ (110%) ç§»åˆ°å·¦å´ (-40%)ï¼Œè€—æ™‚ 5 ç§’ */
        @keyframes move-across {
          0% { left: 110%; transform: rotate(5deg); }
          50% { transform: rotate(-5deg); }
          100% { left: -40%; transform: rotate(5deg); }
        }
        .animate-move-across {
          animation: move-across 5s linear forwards;
        }

        /* ç­”å°é£›å‡ºå‹•ç•« (å¾€å·¦é£›èµ°) */
        @keyframes zoom-out-left {
          0% { transform: scale(1) translateX(0); opacity: 1; }
          100% { transform: scale(0.5) translateX(-100vw); opacity: 0; }
        }
        .animate-zoom-out-left {
          animation: zoom-out-left 0.6s ease-in forwards;
        }

        /* æµ®å‹•æ–‡å­— */
        @keyframes float-up {
          0% { transform: translate(-50%, -8rem) scale(0.8); opacity: 0; }
          20% { transform: translate(-50%, -9rem) scale(1.2); opacity: 1; }
          100% { transform: translate(-50%, -12rem) scale(1); opacity: 0; }
        }
        .animate-float-up {
          animation: float-up 0.8s ease-out forwards;
        }

        /* éŒ¯èª¤éœ‡å‹• */
        .shake {
          animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
      `}</style>
    </div>
  );
}
